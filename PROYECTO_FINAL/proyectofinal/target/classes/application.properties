# ============================================
# PROYECTO FINAL PR - SISTEMA IoT CLIENTE-SERVIDOR
# ============================================

# ================= SERVIDOR =================
# Puerto principal de la aplicacion Spring Boot
server.port=8080

# Contexto base para todas las rutas API
server.servlet.context-path=/api

# Configuracion adicional del servidor
server.servlet.session.timeout=30m
server.servlet.session.cookie.http-only=true
server.error.include-stacktrace=never

# ================= BASE DE DATOS =================
# PostgreSQL - Configuracion de conexion
spring.datasource.url=jdbc:postgresql://localhost:5432/iot_management_db
spring.datasource.username=iot_app_user
spring.datasource.password=SecurePass123!
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuracion del pool de conexiones
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ================= JPA / HIBERNATE =================
# Estrategia para el manejo del esquema de BD
# validate: solo valida que las tablas existan (recomendado para produccion)
# update: actualiza el esquema si hay cambios (para desarrollo)
#spring.jpa.hibernate.ddl-auto=validate
spring.jpa.hibernate.ddl-auto=none

# Mostrar consultas SQL en consola (util para depuracion)
spring.jpa.show-sql=true

# Formatear las consultas SQL para mejor legibilidad
spring.jpa.properties.hibernate.format_sql=true

# Dialecto de PostgreSQL para Hibernate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Manejo de LOBs (Large Objects)
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# ================= LOGGING =================
# Niveles de logging
logging.level.root=INFO
logging.level.com.iot.proyectofinal=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Configuracion del archivo de log
logging.file.name=logs/proyecto-iot.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.console=%d{HH:mm:ss} %-5level %logger{36} - %msg%n

# ================= SOCKETS =================
# Configuracion de sockets TCP/UDP
app.socket.tcp.port=8081
app.socket.udp.port=8082
app.socket.max.connections=10
app.socket.timeout.ms=30000

# ================= SEGURIDAD =================
# NOTA: Para desarrollo, desactivamos seguridad
# En produccion, activar y configurar Spring Security
# spring.security.user.name=admin
# spring.security.user.password=admin123
# spring.security.user.roles=ADMIN

# Configuracion CORS para desarrollo
app.cors.allowed-origins=http://localhost:3000,http://localhost:4200,http://localhost:8080
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# ================= CONFIGURACION DE LA APLICACION =================
# Informacion de la aplicacion
app.name=Proyecto Final PR - Sistema IoT Cliente-Servidor
app.version=1.0.0
app.description=Sistema de gestion de dispositivos IoT con comunicacion TCP/UDP y REST API
app.author=Estudiante Universidad

# Configuraciones de negocio
app.dispositivo.maximo.por.usuario=50
app.dispositivo.tiempo.inactividad.minutos=30
app.notificacion.reintentos.maximos=3

# ================= SPRING BOOT =================
# Banner personalizado
spring.banner.location=classpath:banner.txt

# Recarga automatica en desarrollo (Spring Boot DevTools)
spring.devtools.restart.enabled=true
spring.devtools.restart.poll-interval=2s
spring.devtools.restart.quiet-period=1s

# Actuator endpoints (monitoreo)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.info.env.enabled=true

# ================= MULTIPART (para futuras extensiones) =================
# Configuracion para subida de archivos
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ================= CACHE =================
# Configuracion basica de cache
spring.cache.type=simple
spring.cache.cache-names=dispositivos,usuarios

# ================= VALIDACION =================
# Configuracion de validacion
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# ================= EMAIL (para futuras extensiones) =================
# Configuracion de email (ejemplo)
# spring.mail.host=smtp.gmail.com
# spring.mail.port=587
# spring.mail.username=tu-email@gmail.com
# spring.mail.password=tu-password
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true

# ================= CONFIGURACIONES ESPECIFICAS DEL PROYECTO =================
# Puerto para el servidor REST (diferente del puerto TCP/UDP)
app.rest.port=${server.port}

# Configuracion de reintentos de conexion
app.conexion.reintentos.maximos=3
app.conexion.timeout.segundos=10

# Configuracion de monitoreo
app.monitor.intervalo.segundos=60
app.monitor.alertas.habilitado=true

# Tipos de dispositivos permitidos
app.dispositivo.tipos.permitidos=sensor,actuador,cámara,termómetro,otros

# Estados permitidos para dispositivos
app.dispositivo.estados.permitidos=activo,inactivo,mantenimiento,error